<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // These values could be dynamically inserted by your server
      const service = getQueryParam("service");
      const code = getQueryParam("code");
      const idToken = getQueryParam("id_token");

      if (service === "apple-mobile") {
        // Redirect to the custom scheme URL
        const customUrl = `vidyameapplesdk://?code=${encodeURIComponent(code)}&id_token=${encodeURIComponent(idToken)}`;
        window.location.href = customUrl;
      } else {
        // Redirect to Socialite driver URL
        // e.g., /auth/redirect/google
        const socialiteRedirectUrl = `/auth/redirect/${encodeURIComponent(service)}`;
        window.location.href = socialiteRedirectUrl;
      }
    });

    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name) || "";
    }
  </script>
</head>
<body>
  <p>Redirecting...</p>
</body>
</html>
